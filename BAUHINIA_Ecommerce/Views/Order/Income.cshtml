@*@using BAUHINIA_Ecommerce.ViewModels*@
@using Ecommerce.ViewModel
@{
    ViewData["Title"] = "Monthly Income";
    Layout = "~/Views/Shared/_LayoutDashboard.cshtml";
    var Model = ViewBag.Incomes as List<MonthlyIncomeVM>;
}

<!-- Content wrapper -->
<div class="content-wrapper">
    <!-- Content -->

    <div class="container-xxl flex-grow-1 container-p-y">
        <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">Income /</span> Report</h4>

        <!-- Basic Bootstrap Table -->
        <div class="card">
            <h5 class="card-header">Monthly Income</h5>
            <div class="table-responsive text-nowrap">

                <table class="table">
                    <thead>
                        <tr>
                            @if (Model != null)
                            {

                                <th width="80px" style="border-bottom-width:0px!important;border:none;" > </th>
                                <th> Month </th>
                                <th> Orders</th>
                                <th> Products</th>
                                <th> Total Amount</th>


                            }


                        </tr>
                    </thead>
                    @foreach (var group in Model.GroupBy(m => m.Year))
                    {
                        <tbody class="table-border-bottom-0">
                            <tr>
                                <td style="border-bottom-width:0px;">
                                    @group.Key <span> Year</span>
                                </td>

                            </tr>
                            @foreach (var item in group)
                            {
                                <tr>
                                    <td style="border:none;"></td>
                                    <td>
                                        <i class="fab fa-angular fa-lg text-danger me-3"></i>
                                        <strong>
                                            @{
                                                string Mnth = new DateTime(2022,item.Month,1).ToString("MMM");
                                            }
                                            @Mnth
                                        </strong>
                                    </td>
                                    <td>
                                        <i class="fab fa-angular fa-lg text-danger me-3"></i>
                                        <strong>
                                            @Html.DisplayFor(modelItem => item.NoOfOrders)
                                        </strong>
                                    </td>
                                    <td>
                                        <i class="fab fa-angular fa-lg text-danger me-3"></i>
                                        <strong>
                                            @{
                                                string products = Convert.ToInt32(item.NoOfProduct).ToString();
                                            }
                                            @products
                                        </strong>
                                    </td>
                                    <td>
                                        <i class="fab fa-angular fa-lg text-danger me-3"></i>
                                        <strong>
                                            @Html.DisplayFor(modelItem => item.TotalAmount)
                                        </strong>
                                    </td>

                                </tr>

                            }



                        </tbody>
                    }
                </table>
            </div>
        </div>

    </div>

</div>
